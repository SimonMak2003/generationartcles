<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Федералист | Генератор кода</title>
    <style>
        body { font-family: segoe ui, sans-serif; background: #eceff1; padding: 20px; color: #333; }
        .wrapper { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-btn { padding: 10px 20px; cursor: pointer; border: none; background: #ddd; border-radius: 5px; }
        .tab-btn.active { background: #006aa7; color: white; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 14px; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-family: inherit; }
        textarea { min-height: 80px; }
        .btn-add { background: #4caf50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-right: 5px; margin-top: 10px; }
        #output { width: 100%; min-height: 200px; margin-top: 20px; background: #f9f9f9; font-family: monospace; font-size: 12px; }
        .row { display: flex; gap: 10px; }
        .delete-btn { background: #ff5252; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px; }
        .dialog-item { border-left: 4px solid #006aa7; padding: 10px; margin-bottom: 10px; background: #f1f8ff; }
    </style>
</head>
<body>

<div class="wrapper">
    <h2>Генератор контента «Федералист»</h2>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="switchMode('article')">Статья</button>
        <button class="tab-btn" onclick="switchMode('interview')">Интервью</button>
    </div>

    <!-- Поля для статьи -->
    <div id="article-fields">
        <div class="input-group"><label>Инфо (Дата | Категория)</label><input type="text" id="art_info" placeholder="6 июня | Политика"></div>
        <div class="input-group"><label>Название</label><input type="text" id="art_title" placeholder="Заголовок статьи"></div>
        <div class="input-group"><label>Логлайн</label><input type="text" id="art_logline" placeholder="Краткая суть"></div>
        <div class="input-group"><label>Первый абзац</label><textarea id="art_first"></textarea></div>
        <div class="input-group"><label>Ссылка на картинку статьи</label><input type="text" id="art_img"></div>
        <div class="input-group"><label>Основной текст</label><textarea id="art_main" style="height: 200px"></textarea></div>
        <div class="input-group"><label>Автор (BB-код)</label><input type="text" id="art_author" placeholder="[USER=8]Имя[/USER]"></div>
        <div class="input-group"><label>Ссылка на фото автора</label><input type="text" id="art_author_img"></div>
    </div>

    <!-- Поля для интервью -->
    <div id="interview-fields" style="display:none;">
        <div class="input-group"><label>Заголовок интервью</label><input type="text" id="int_title"></div>
        <div id="dialog-container"></div>
        <button class="btn-add" onclick="addDialog('question')">+ Вопрос (Слева)</button>
        <button class="btn-add" onclick="addDialog('answer')">+ Ответ (Справа)</button>
    </div>

    <hr>
    <button class="btn-add" style="background:#006aa7; width: 100%; font-size: 18px;" onclick="generate()">Сгенерировать код</button>

    <label style="margin-top:20px;">Результат (Скопируйте в сообщение на форуме):</label>
    <textarea id="output" readonly></textarea>
</div>

<script>
let currentMode = 'article';

function switchMode(mode) {
    currentMode = mode;
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById('article-fields').style.display = mode === 'article' ? 'block' : 'none';
    document.getElementById('interview-fields').style.display = mode === 'interview' ? 'block' : 'none';
}

function addDialog(type) {
    const container = document.getElementById('dialog-container');
    const div = document.createElement('div');
    div.className = 'dialog-item';
    div.dataset.type = type;
    div.innerHTML = `
        <div class="row">
            <input type="text" placeholder="Кто говорит (Имя)" style="width:30%" class="diag-name">
            <textarea placeholder="Текст реплики" style="width:60%" class="diag-text"></textarea>
            <button class="delete-btn" onclick="this.parentElement.parentElement.remove()">X</button>
        </div>
    `;
    container.appendChild(div);
}

function generate() {
    let finalCode = "";
    const note = `[PARSEHTML]<div class="ArticleNote">Вы можете поддержать издание «Федералист», поставив реакцию к статье, присоединившись к её обсуждению или отправив донат игровой валюты (или золота) автору статьи.</div>[/PARSEHTML]`;

    if (currentMode === 'article') {
        const info = document.getElementById('art_info').value;
        const title = document.getElementById('art_title').value;
        const logline = document.getElementById('art_logline').value;
        const first = document.getElementById('art_first').value;
        const img = document.getElementById('art_img').value;
        const main = document.getElementById('art_main').value;
        const author = document.getElementById('art_author').value;
        const authorImg = document.getElementById('art_author_img').value;

        finalCode = `[PARSEHTML]<div class="ArticleHeader">[/PARSEHTML]${info}\n\n${title}\n\n${logline}[PARSEHTML]</div>\n<div style="text-align: center; padding: 20px 0 0;"><img src="${img}" style="width: 100%; object-fit: cover; max-height: 200px; box-shadow: 0 3px 6px rgba(0,0,0,0.16);"></div>\n<br>\n<div class="ArticleText">[/PARSEHTML]${first}\n\n${main}[PARSEHTML]</div>\n\n<div class="AuthorColumn" style="background-color: #f5f5f5; --color: #006aa7">\n<div class="AuthorInfo"><div class="AuthorProfile"><img class="AuthorPfp" src="${authorImg}">\n<p class="AuthorName">[/PARSEHTML]${author}[PARSEHTML]</p></div>\n<p class="AuthorDesc">Автор статьи</p></div></div>[/PARSEHTML]\n\n${note}`;
    } else {
        const intTitle = document.getElementById('int_title').value;
        let dialogs = "";
        document.querySelectorAll('.dialog-item').forEach(item => {
            const type = item.dataset.type;
            const name = item.querySelector('.diag-name').value;
            const text = item.querySelector('.diag-text').value;
            const className = type === 'question' ? 'yp_interview_question' : 'yp_interview_answer';
            const labelClass = type === 'question' ? 'yp_interviewer' : 'yp_interviewee';
            
            dialogs += `[PARSEHTML]<div class="${className}"><span class="${labelClass}">${name}:</span>[/PARSEHTML] ${text} [PARSEHTML]</div>[/PARSEHTML]\n`;
        });

        finalCode = `[PARSEHTML]<div class="ArticleHeader">[/PARSEHTML]ИНТЕРВЬЮ | ${intTitle}[PARSEHTML]</div>[/PARSEHTML]\n\n${dialogs}\n\n${note}`;
    }

    document.getElementById('output').value = finalCode;
}
</script>

</body>
</html>
